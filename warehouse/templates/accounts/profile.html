{#
 # Licensed under the Apache License, Version 2.0 (the "License");
 # you may not use this file except in compliance with the License.
 # You may obtain a copy of the License at
 #
 # http://www.apache.org/licenses/LICENSE-2.0
 #
 # Unless required by applicable law or agreed to in writing, software
 # distributed under the License is distributed on an "AS IS" BASIS,
 # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 # See the License for the specific language governing permissions and
 # limitations under the License.
-#}
{% extends "base.html" %}

{% block title %}{{ user.username }}{% endblock %}

{% block content %}
<section class="horizontal-section horizontal-section--medium">
  <div class="left-layout">
    <div class="left-layout__sidebar">
      <div class="author-profile">
        <img src="{{ gravatar(user.email, size=400) }}" height="200" width="200" alt="{{ user.name|default(user.username, true) }}">
        <h1 class="author-profile__name">{{ user.name|default(user.username, true) }}{% if user.name %}({{ user.username }}){% endif %}</h1>
        {% if user.date_joined %}
          <p class="author-profile__joined">
            Joined on {{ user.date_joined|format_date() }}
          </p>
        {% endif %}
        {#
        <div class="author-profile__bio">
          <p>User Bio will go here</p>
        </div>
        #}
      </div>
    </div>

    <div class="left-layout__main">
     <center>
	     <h2>Upload Project</h2>
	     <!--<form method="POST" action="/upload/package" name="submit" enctype="multipart/form-data">
      		<input type="file" name="fileField"><br /><br />
		<input type="submit" name="submit" value="Submit">
	     </form> -->
	     <form tal:attributes="action app/url_path" method="POST"
    enctype="multipart/form-data">
<input type="hidden" name=":action" value="files" />
<input type="hidden" name="name" tal:attributes="value data/name" />
<input type="hidden" name="version" tal:attributes="value data/version" />
<table class="form">
 <tr class="odd">
  <th class="required">File:</th>
  <td><input type="file" name="content" /></td>
 </tr>

 <tr class="even">
  <th class="required">File Type:</th>
  <td>
   <select name="filetype">
    <option value="">-- Select Distribution Type --</option>
     <option tal:repeat="type app/dist_file_types"
        tal:attributes="value python:type[0]" tal:content="python:type[1]" />
    </select>
  </td>
 </tr>

 <tr class="odd">
  <th>Python Version:</th>
  <td>
   <select name="pyversion">
    <option value="">-- Select Python Version --</option>
    <option value="any">Any (ie. pure Python)</option>
    <option value="2.3">2.3</option>
    <option value="2.4">2.4</option>
    <option value="2.5">2.5</option>
    <option value="2.6">2.6</option>
    <option value="2.7">2.7</option>
    <option value="3.0">3.0</option>
    <option value="3.1">3.1</option>
    <option value="3.2">3.2</option>
    <option value="3.3">3.3</option>
    <option value="3.4">3.4</option>
    <option value="3.5">3.5</option>
   </select> (not needed for source distributions)
  </td>
 </tr>

 <tr class="even">
  <th>Comment:</th>
  <td><input type="text" name="comment" size="40" />
    (optional - use if there's multiple files for one distribution type)
  </td>
 </tr>

 <tr class="odd">
  <th>MD5 Digest:</th>
  <td><input type="text" name="md5_digest" size="40" />
    (optional - will be calculated if not supplied)
  </td>
 </tr>

 <tr class="even">
  <th>PGP signature (.asc):</th>
  <td><input type="file" name="gpg_signature"/> (optional)</td>
 </tr>

 <tr class="odd">
  <th class="required">highlighted</th><td>information is required</td>
 </tr>

 <tr class="even">
  <th></th>
  <td><input type="submit" name="submit_upload" value="Upload new File" /></td>
 </tr>
</table>
		     </form></center>
      <h2>Projects</h2>
      <div class="package-list">
        {% for release in projects %}
        <div class="package-snippet">
          <h3 class="package-snippet__title"><a href="{{ request.route_path('packaging.project', name=release.project.normalized_name) }}">{{ release.project.name }}</a></h3>
          <p class="package-snippet__meta">
            <em>Last released on {{ release.created|format_date() }}</em>
          </p>
          <p class="package-snippet__description">{{ release.summary }}</p>
        </div>
        {% endfor %}
      </div>
    </div>
  </div>
</section>


{% endblock %}
